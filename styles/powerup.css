/* === 1) Root variables === */
:root{
  --bg:#0e1415;
  --sidebar-bg:#182828;
  --header-bg:#101617;
  --card-bg:#1b2d2e;
  --card-bg-hover:#254444;
  --text:#f0f0f0;
  --accent:#00ffc6;
  --success:#30d158;
  --error:#ff375f;
  --warning:#ffd60a;
  --info:#9ccfd8;
  --accent-fade:rgba(0,255,190,.1);
  --highlight:#00ffc3;

  /* Tables */
  --table-font:14px;
  --table-clamp:2;                 /* default clamp lines */
  --table-viewport-offset:360px;   /* header + KPI cards + tabs + spacing */
  --table-bottom-pad:16px;         /* tiny cushion at window bottom */

  /* Computed window height (safe on laptops) */
  --table-window:clamp(420px, calc(100vh - var(--table-viewport-offset)), 640px);
}

/* === 2) Global reset === */
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  height:100%;
  font-family:'Inter',sans-serif;
  background:var(--bg);
  color:var(--text);
}

/* === 3) Sidebar / common layout === */
.container{display:flex;height:100%}
.sidebar{
  width:60px;background:var(--sidebar-bg);
  transition:width .3s ease-in-out;overflow:hidden;
  box-shadow:2px 0 8px rgba(0,0,0,.6);
}
.sidebar.expanded{width:220px}
.sidebar .item{
  display:flex;align-items:center;gap:12px;padding:15px;cursor:pointer;color:var(--text);
  transition:background .2s,transform .2s,box-shadow .2s;
}
.sidebar .item:hover{background:var(--card-bg-hover);box-shadow:0 0 8px var(--accent);transform:scale(1.05)}
.sidebar .item i{
  font-size:20px;width:24px;height:24px;display:inline-flex;align-items:center;justify-content:center;
  color:rgba(255,255,255,.7)
}
.sidebar .item:hover i{color:var(--accent)}
.sidebar .item span{font-size:16px;display:none}
.sidebar.expanded .item span{display:inline}
.sidebar .item.active{background:var(--card-bg-hover);font-weight:600}
.sidebar .item.active i{color:var(--accent)}

/* === 4) Main & header === */
.main{
  flex:1;display:flex;flex-direction:column;overflow:hidden;width:100%;
}
.header{
  background:rgba(16,22,23,.8);
  -webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);
  padding:15px 20px;position:sticky;top:0;z-index:10;
  border-bottom:1px solid rgba(0,255,198,.1);
  box-shadow:0 4px 12px rgba(0,255,198,.08);
}
.header h1{font-size:24px;color:var(--accent);margin-bottom:5px}
.header p{font-size:14px;color:var(--info)}
.header p span{color:var(--accent);font-weight:600}

/* === 5) KPI cards === */
body.dashboard .top-cards{
  display:flex;gap:20px;padding:15px 20px 35px 20px;background:var(--bg);
  position:sticky;top:75px;z-index:9;
}
.card{
  background:var(--card-bg);padding:15px;border-radius:8px;
  box-shadow:0 2px 6px rgba(0,0,0,.4);transition:transform .3s,box-shadow .3s;
}
.card:hover{transform:translateY(-2px);box-shadow:0 4px 10px rgba(255,140,66,.3)}
body.dashboard .power-card{flex:1;max-width:500px;border:2px solid var(--accent)}
body.dashboard .power-card h3{font-size:16px;margin-bottom:5px;color:var(--accent);font-weight:600}

/* Progress bar */
.progress-bar{height:8px;background:#2d3f3f;border-radius:4px;overflow:hidden;margin:6px 0 10px}
.progress-bar-inner{height:100%;background:var(--accent);width:18.5%;transition:width .3s ease-in-out}

/* Tokens */
.token-card{
  display:flex;align-items:center;flex-direction:column;justify-content:center;
  text-align:center;min-width:220px;border:2px solid var(--accent);
  font-weight:700;color:#facc15;
}
.token-card h3{font-size:18px;margin-bottom:5px;color:var(--accent)}
.token-tracker{display:flex;align-items:center;gap:8px;font-size:24px;margin-top:8px}
.token-tracker i{font-size:28px;color:#facc15}

/* === 6) Tabs === */
.tab-buttons{
  display:flex;gap:2px;padding:0 20px;background:var(--bg);
  border-bottom:2px solid var(--accent);position:sticky;top:140px;z-index:8;
}
.tab-button{
  background:var(--card-bg);border:2px solid transparent;border-bottom:none;color:#aaa;
  padding:10px 16px;border-top-left-radius:8px;border-top-right-radius:8px;cursor:pointer;
  transition:background .2s,color .2s,transform .2s;
}
.tab-button:hover{background:var(--card-bg-hover);color:var(--accent);transform:translateY(-1px)}
.tab-button.active{
  background:var(--bg);color:var(--accent);
  border-color:var(--accent) var(--accent) transparent var(--accent);
  font-weight:700;position:relative;top:2px;z-index:9;
}
.tab-panel{display:none;padding:20px}
.tab-panel.active{display:block}

/* === 7) Table header/controls === */
.table-header-row{display:flex;align-items:center;gap:20px;margin-bottom:10px;flex-wrap:wrap}
.table-header-row h3{margin:0;font-size:18px;color:var(--text)}
.table-header-controls{display:flex;align-items:center;gap:10px}
.table-header-controls select{
  padding:6px 10px;background:#213331;color:var(--text);border:1px solid var(--accent);border-radius:4px;
}
.add-btn{
  background:var(--accent);color:#000;font-weight:700;padding:6px 12px;border-radius:5px;border:none;cursor:pointer;
  transition:background .2s,transform .2s;
}
.add-btn:hover{background:#ffa364;transform:scale(1.05)}
.row-count{font-size:14px;color:var(--accent)}
.table-toggle{
  background:transparent;border:1px dashed var(--accent);color:var(--accent);
  border-radius:4px;padding:4px 8px;font-size:12px;cursor:pointer;opacity:.85;
}
.table-toggle:hover{opacity:1;background:var(--card-bg-hover)}

/* === 8) Power-hours page (unchanged) === */
body.power-hours .stats_bar{display:flex;flex-direction:column;align-items:flex-start;gap:10px;margin-bottom:20px;max-width:500px}
body.power-hours .power-card-small{
  background:var(--card-bg);border:2px solid var(--accent);padding:8px 16px;border-radius:8px;
  box-shadow:0 2px 6px rgba(0,0,0,.4);color:var(--text);width:100%;max-width:340px;min-width:320px;text-align:left;
}
body.power-hours .power-card-small h3{font-size:16px;margin-bottom:4px;color:var(--accent)}
body.power-hours .power-card-small p{font-size:18px;font-weight:700;margin-bottom:4px}
body.power-hours .power-card-small small{font-size:12px;color:var(--info)}
body.power-hours #summary-text{color:var(--text)}
body.power-hours .summary-details{display:flex;align-items:center;gap:12px;font-size:16px;color:var(--text)}
body.power-hours .summary-details select{
  padding:6px 10px;background:var(--card-bg);color:var(--text);border:1px solid var(--accent);border-radius:4px;
}
body.power-hours .progress-bar{background:#2b4d4e;height:8px;margin:8px 0;border-radius:10px;overflow:hidden}
body.power-hours .progress-bar-inner{background:var(--accent);height:100%;width:0;transition:width .3s}

/* ======================================================================= */
/* === 9) TABLES — clean card + internal scroller (desktop mock style) === */
/* ======================================================================= */

/* OUTER RECTANGLE (“card”) */
.table-frame,
.table-card{ /* alias so older markup still looks right */
  background:var(--card-bg);
  border:1px solid #2d3f3f;
  border-radius:8px;
  box-shadow:0 2px 6px rgba(0,0,0,.35);
  margin:0 0 24px 0;
  overflow:hidden;
}

/* THE WINDOW THAT SCROLLS (internal body scroller) */
.table-window,
.table-card .table-scroll,
.table-scroll{ /* alias for legacy .table-scroll */
  height:var(--table-window);
  overflow:auto;
}

/* add a tiny invisible spacer so the last row never kisses the edge */
.table-window::after,
.table-card .table-scroll::after,
.table-scroll::after{
  content:"";display:block;height:var(--table-bottom-pad);
}

/* TABLE LOOK (same style you liked) */
.table-window table,
.table-card .table-scroll table,
.table-scroll table{
  width:100%;border-collapse:collapse;table-layout:auto;font-size:var(--table-font);
}
.table-window th,.table-window td,
.table-card .table-scroll th,.table-card .table-scroll td,
.table-scroll th,.table-scroll td{
  padding:10px 12px;text-align:left;vertical-align:top;border-bottom:1px solid #3a4e4e;
}
.table-window thead th,
.table-card .table-scroll thead th,
.table-scroll thead th{
  position:sticky;top:0;background:#213331;z-index:2;color:var(--accent);
}
.table-window tbody tr:hover,
.table-card .table-scroll tbody tr:hover,
.table-scroll tbody tr:hover{background-color:rgba(255,255,255,.05)}

/* Sort affordance (if you add classes from JS) */
.table-window th.sortable::after,
.table-card .table-scroll th.sortable::after,
.table-scroll th.sortable::after{content:' ⇅';font-size:12px;color:#999}
.table-window th.sorted-asc::after,
.table-card .table-scroll th.sorted-asc::after,
.table-scroll th.sorted-asc::after{content:' ↑';color:var(--accent)}
.table-window th.sorted-desc::after,
.table-card .table-scroll th.sorted-desc::after,
.table-scroll th.sorted-desc::after{content:' ↓';color:var(--accent)}

/* Text clamping for long columns */
.table-window .cell,
.table-card .table-scroll .cell,
.table-scroll .cell{
  display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:var(--table-clamp);
  overflow:hidden;line-height:1.35;overflow-wrap:anywhere;hyphens:auto;
}
.rows-expanded .table-window .cell,
.rows-expanded .table-card .table-scroll .cell,
.table-window table.is-expanded .cell,
.table-card .table-scroll table.is-expanded .cell,
.table-scroll table.is-expanded .cell{ -webkit-line-clamp:unset; overflow:visible; }

/* Give common long-text columns one extra line */
.table-window td[data-col="problem"] .cell,
.table-window td[data-col="proposed improvement"] .cell,
.table-window td[data-col="last action"] .cell,
.table-window td[data-col="description"] .cell,
.table-window td[data-col="recommendations"] .cell,
.table-window td[data-col="recommendations to correct/improve safety issue"] .cell,
.table-window td[data-col="resolution"] .cell,
.table-window td[data-col="leadership update"] .cell,
.table-card .table-scroll td[data-col="problem"] .cell,
.table-card .table-scroll td[data-col="proposed improvement"] .cell,
.table-card .table-scroll td[data-col="last action"] .cell,
.table-card .table-scroll td[data-col="description"] .cell,
.table-card .table-scroll td[data-col="recommendations"] .cell,
.table-card .table-scroll td[data-col="recommendations to correct/improve safety issue"] .cell,
.table-card .table-scroll td[data-col="resolution"] .cell,
.table-card .table-scroll td[data-col="leadership update"] .cell,
.table-scroll td[data-col="problem"] .cell,
.table-scroll td[data-col="proposed improvement"] .cell,
.table-scroll td[data-col="last action"] .cell,
.table-scroll td[data-col="description"] .cell,
.table-scroll td[data-col="recommendations"] .cell,
.table-scroll td[data-col="recommendations to correct/improve safety issue"] .cell,
.table-scroll td[data-col="resolution"] .cell,
.table-scroll td[data-col="leadership update"] .cell{
  -webkit-line-clamp:calc(var(--table-clamp) + 1);
}

/* Keep obvious short columns from wrapping (cleaner rows) */
.table-window th[data-col="submission date"],
.table-window td[data-col="submission date"],
.table-window th[data-col="date"],
.table-window td[data-col="date"],
.table-window th[data-col="submission id"],
.table-window td[data-col="submission id"],
.table-window th[data-col="id"],
.table-window td[data-col="id"],
.table-window th[data-col="action date"],
.table-window td[data-col="action date"],
.table-window th[data-col="tokens"],
.table-window td[data-col="tokens"],
.table-window th[data-col="paid"],
.table-window td[data-col="paid"],
.table-window th[data-col="work order"],
.table-window td[data-col="work order"],
.table-window th[data-col="area"],
.table-window td[data-col="area"],
.table-window th[data-col="part number"],
.table-window td[data-col="part number"],
.table-window th[data-col="assigned to"],
.table-window td[data-col="assigned to"],
.table-card .table-scroll th[data-col="submission date"],
.table-card .table-scroll td[data-col="submission date"],
.table-card .table-scroll th[data-col="date"],
.table-card .table-scroll td[data-col="date"],
.table-card .table-scroll th[data-col="submission id"],
.table-card .table-scroll td[data-col="submission id"],
.table-card .table-scroll th[data-col="id"],
.table-card .table-scroll td[data-col="id"],
.table-card .table-scroll th[data-col="action date"],
.table-card .table-scroll td[data-col="action date"],
.table-card .table-scroll th[data-col="tokens"],
.table-card .table-scroll td[data-col="tokens"],
.table-card .table-scroll th[data-col="paid"],
.table-card .table-scroll td[data-col="paid"],
.table-card .table-scroll th[data-col="work order"],
.table-card .table-scroll td[data-col="work order"],
.table-card .table-scroll th[data-col="area"],
.table-card .table-scroll td[data-col="area"],
.table-card .table-scroll th[data-col="part number"],
.table-card .table-scroll td[data-col="part number"],
.table-card .table-scroll th[data-col="assigned to"],
.table-card .table-scroll td[data-col="assigned to"],
.table-scroll th[data-col="submission date"],
.table-scroll td[data-col="submission date"],
.table-scroll th[data-col="date"],
.table-scroll td[data-col="date"],
.table-scroll th[data-col="submission id"],
.table-scroll td[data-col="submission id"],
.table-scroll th[data-col="id"],
.table-scroll td[data-col="id"],
.table-scroll th[data-col="action date"],
.table-scroll td[data-col="action date"],
.table-scroll th[data-col="tokens"],
.table-scroll td[data-col="tokens"],
.table-scroll th[data-col="paid"],
.table-scroll td[data-col="paid"],
.table-scroll th[data-col="work order"],
.table-scroll td[data-col="work order"],
.table-scroll th[data-col="area"],
.table-scroll td[data-col="area"],
.table-scroll th[data-col="part number"],
.table-scroll td[data-col="part number"],
.table-scroll th[data-col="assigned to"],
.table-scroll td[data-col="assigned to"]{
  white-space:nowrap;
}

/* Pills never stretch rows */
.table-window .badge,
.table-card .table-scroll .badge,
.table-scroll .badge{white-space:nowrap}

/* Zebra striping */
.table-window tbody tr:nth-child(odd),
.table-card .table-scroll tbody tr:nth-child(odd),
.table-scroll tbody tr:nth-child(odd){background:rgba(255,255,255,.02)}

/* Optional “End of results” footer under the window */
.table-footer{
  border-top:1px solid #2d3f3f;padding:10px 12px;background:var(--card-bg);
  color:var(--info);font-size:12px;
}

/* Hide native scrollbars (optional) */
.table-window::-webkit-scrollbar,
.table-card .table-scroll::-webkit-scrollbar,
.table-scroll::-webkit-scrollbar{display:none}
.table-window,.table-card .table-scroll,.table-scroll{scrollbar-width:none;-ms-overflow-style:none}

/* === 10) Buttons & badges (shared) === */
.load-more{
  background:none;color:var(--accent);border:1px dashed var(--accent);border-radius:4px;
  padding:6px 12px;margin-top:10px;cursor:pointer;transition:background .2s,transform .2s;
}
.load-more:hover{background:var(--card-bg-hover);transform:scale(1.05)}
.badge{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:600;display:inline-block}
.approved{background:var(--success);color:#000}
.denied{background:var(--error);color:#fff}
.pending{background:var(--warning);color:#000}
.completed{background:var(--success);color:#000}

/* === 11) Generic content container === */
.content{padding:20px;overflow-y:auto}

/* === 12) Notes (unchanged) === */
body.notes .notes-controls{padding:20px;background:var(--card-bg);border-bottom:2px solid var(--accent)}
body.notes #note-input{width:100%;padding:12px 14px;font-size:16px;border:none;border-radius:6px;background:#213331;color:var(--text)}
body.notes .notes-list{list-style:none;padding:20px}
body.notes .notes-list li{
  background:var(--card-bg);margin-bottom:10px;padding:12px;border-left:4px solid var(--accent);
  display:flex;justify-content:space-between;align-items:center;border-radius:6px;color:var(--text);
}
body.notes .notes-list li .delete-note{color:var(--error);cursor:pointer}
body.notes .note-controls{padding:20px;display:flex;justify-content:flex-end}
body.notes .note-table{width:100%;border-collapse:collapse;margin:0 20px 20px}
body.notes .note-table th,body.notes .note-table td{padding:12px;border-bottom:1px solid #2d3f3f}
body.notes .note-table tr:hover{background:#213331}
body.notes .note-text{max-width:400px;white-space:pre-wrap}
body.notes .note-actions button{margin-left:8px;padding:4px 8px;background:var(--accent);border:none;border-radius:4px;cursor:pointer}
body.notes .note-actions button:last-child{background:var(--error)}
body.notes .fab,.hidden{display:none}
body.notes .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center}
body.notes .modal-content{background:var(--card-bg);padding:20px;border:2px solid var(--accent);border-radius:8px;width:360px}
body.notes .modal-content textarea{width:100%;height:80px;background:#111;border:1px solid var(--accent);padding:8px;color:var(--text);resize:none}
body.notes .modal-actions{display:flex;justify-content:flex-end;gap:10px;margin-top:12px}
.save-btn{background:var(--accent);color:#000;padding:6px 12px;border:none;border-radius:4px}
.cancel-btn{background:#333;color:var(--text);padding:6px 12px;border:none;border-radius:4px}
body.notes .notes-layout{display:flex;height:100%;overflow:hidden}
body.notes .notes-sidebar{
  background:var(--sidebar-bg);border-right:2px solid var(--accent);padding:16px;width:260px;min-width:220px;max-width:300px;
  display:flex;flex-direction:column;gap:16px;
}
body.notes .note-sidebar-header{display:flex;justify-content:space-between;align-items:center}
body.notes .note-sidebar-header h2{font-size:18px;color:var(--accent)}
body.notes .add-btn{background:var(--accent);color:#000;font-weight:700;padding:4px 10px;font-size:14px;border:none;border-radius:4px;cursor:pointer;transition:.2s}
body.notes .add-btn:hover{background:var(--highlight)}
body.notes #notesList{list-style:none;margin:0;padding:0;flex-grow:1;overflow-y:auto}
body.notes #notesList li{
  padding:10px;border-radius:5px;background:var(--card-bg);margin-bottom:10px;cursor:pointer;transition:background .2s ease;
}
body.notes #notesList li:hover,body.notes #notesList li.active{background:var(--accent-fade)}
body.notes .note-meta{font-size:12px;color:var(--info)}
body.notes .notes-editor{flex:1;display:flex;flex-direction:column;padding:0 20px}
body.notes .notes-toolbar{
  display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid var(--accent);flex-wrap:wrap;gap:12px;
}
body.notes .notes-toolbar .toolbar button{
  margin-right:10px;background:var(--card-bg);color:var(--accent);border:1px solid var(--accent);padding:6px 10px;border-radius:4px;cursor:pointer;font-size:14px;transition:background .2s ease;
}
body.notes .notes-toolbar .toolbar button:hover{background:var(--accent-fade)}
body.notes .controls button{background:var(--accent);color:#000;padding:6px 12px;margin-left:8px;font-weight:700;border:none;border-radius:4px;cursor:pointer}
body.notes .controls button:hover{background:var(--highlight)}
body.notes .notes-toolbar .toolbar button i{pointer-events:none;font-size:16px}
.delete-icon{background:none;border:none;color:#e74c3c;font-size:14px;cursor:pointer;padding:4px;opacity:.8;transition:.2s}
.delete-icon:hover{opacity:1}
